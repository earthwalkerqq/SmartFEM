# Разработка программного обеспечения для модального анализа балочных, рамных и пластинчатых конструкций методом конечных элементов

## Описание проекта

Этот проект представляет собой модульную систему, объединяющую:

- **Модальный анализ механических конструкций** методом конечных элементов (FEM/МКЭ)
- **Модуль машинного обучения (ML)** для интеллектуального анализа результатов

Система предназначена для:
- Расчёта **собственных частот** и **форм колебаний**
- **Быстрого предсказания** характеристик колебаний по параметрам конструкции
- **Инверсного проектирования**: подбор параметров конструкции под заданные модальные характеристики
- **Классификации** типов колебаний по формам собственных мод

---

## Архитектура проекта

[STEP файл]
     ↓
[PythonOCC → geometry.json]
     ↓
[mesh_generator (Netgen или Gmsh)]
     ↓
[mesh.json] → [FEM-модуль на C/C++]
     ↓
[Результаты → ML-модуль на Python]

Модуль расчета методом конечных элементов(FEM-модуль) реализуется на C/C++, ML-модуль реализуется отдельно на Python. Обмен данными происходит через json или csv (алтернативный метод - использовать REST API. Реализуется Python REST-сервер, а клиент, в виде FEM-модуля, отправляет параметры и получает результат работы ML модуля). Для интеграции проекта с CAD/CAE необходимо написать вспомогательный Python-скрипт с использованием pythonocc/cadquery/FreeCAD. Далее скрипт экспортирует json/csv файл в FEM-модуль. После получения файла с параметрами CAD-модели необходимо реализовать модуль генерации КЭ сетки. Предлагается использовать open-source генератор 3д и 2д сеток NetGen. Netgen умеет напрямую загружать STEP/STP-файлы через OpenCascade и генерировать 3D-сетку без промежуточного JSON, однако, чтобы добиться разделение модулей и гибкости/настраиваимости генерации сетки, был выбран путь с парсингом CAD-модели в json файл. Далее сетка передается FEM-модулю для расчета.


# Конвертация STEP → JSON для FEM-модуля

Этот шаг предназначен для извлечения параметров конструкции из CAD-модели в формате `.STEP` и преобразования их в структурированный `.json` файл. Этот файл затем будет использован в FEM-модуле для конечного элементного анализа.

## Модули:

1. CAD-парсер: извлечение геометрии из STEP/STP и экспорт в JSON

2. Генератор КЭ-сетки: на основе Netgen/Gmsh, управляется параметрами из JSON

3. FEM-модуль (C/C++): расчёт частот, форм колебаний, напряжений и деформаций

4. ML-модуль (Python): обучение и применение интеллектуальных моделей

5. Интерфейс обмена: через .json, .csv или REST API

## FEM-модуль

### Основные функции:
- Построение геометрии модели (балки/рамы/пластины) в CAD-CAE программах
- Парсинг из step/stp формата параметры модели в json
- Генерация КЭ-сетки на основе переданного json файла
- Построение глобальных матриц жесткости и масс
- Нахождение значений перемезений и деформаций в узлах модели
- Решение обобщённой собственной задачи:
- Расчет собственных частот и форм колебаний
- Визуализация результатов средствами OpenGL/Qt
- Тестирование полученных результатов 
- Экспорт результатов в `.json` / `.csv` для ML-модуля

### Используемые технологии:
- Языки программирования: C/C++, Python
- Библиотеки: NetGen, pythonocc/cadquery/FreeCAD, OpenMP, OpenGL/Qt


## Модуль 2: Машинное обучение (ML)

### Основные задачи:
- Обработка данных, полученных из МКЭ
- Обучение моделей ML по разным задачам:

#### 1. Регрессия
**Цель:** предсказание собственных частот конструкции по ее параметрам  
**Модели:** `Random Forest`, `XGBoost`, `MLP`, `LightGBM`

#### 2. Инверсная задача
**Цель:** определение параметров конструкции по заданным частотам  
**Методы:** нейросети, оптимизация, генеративные модели

#### 3. Классификация
**Цель:** автоматическое определение типа колебаний по форме мод  
**Модели:** `SVM`, `Decision Tree`, `kNN`, `CNN` (если формы представлены в виде изображений)

### Используемые технологии:
- Язык программирования: Python
- ML-фреймворки: `scikit-learn`, `XGBoost`, `pandas`, `TensorFlow` / `PyTorch` (по необходимости)

## Пример структуры проекта

src/
| README.md
├── cad_parser/
│   └── convert_step_to_json.py
├── mesh_generator/
│   └── meshgen.cpp
├── fem_solver/
│   ├── fem.cpp
│   └── solver.h
├── ml_module/
│   └── train_predict.py
├── data/
│   ├── geometry.json
│   ├── mesh.json
│   └── results.json
├── docs/
│   └── README.md
└── examples/
    └── beam_example.step

## Входные данные

CAD-модель в формате:
- `.step` / `.stp`
- (опционально) `.iges`

Пример выходного json файла можно посмотреть в ./materials/data-sample

Проект состоит из функционально разделённых частей.